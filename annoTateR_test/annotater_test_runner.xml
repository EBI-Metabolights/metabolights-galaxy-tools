<tool id='annotater_nmr' name="annoTateR NMR pipeline" version="0.1.0+galaxy0">
    <requirements>
        <requirement type="package" version="2.4.4">r-devtools</requirement>
        <requirement type="package" version="1.8.7">r-plyr</requirement>
    </requirements>
    <macros>
        <imports>macros.xml</imports>
    </macros>

    <expand macro="stdio" />
    <command>
        <![CDATA[
        LC_ALL=C Rscript $__tool_directory__/annotater_runner.r
        params_file '$study_params.config_yaml'
        matrix '$study_params.matrix'
        gissmo_ref '$study_params.gissmo_ref'
        ;
        return=\$?;
        cat 'log.txt';
        sh -c "exit \$return" 
        ]]>
    </command>
    <inputs>
        <section name="study_params" title="Study" help="Params pertaining to which study to use" expanded="True">
            <!--STILL NEED TO MAKE THE CHANGE IN PIPELINE TO REFER TO THE SPECIFIC GISSMO SLICE!!!!!! -->
            <param name="gissmo_ref" type="data" label="Gissmo Slice" data_ref="e27d6b080c4f7867" help="Select a gissmo slice from the 'Gissmo ref files' data library." />
            <!--STILL NEED TO MAKE THE CHANGE IN PIPELINE TO REFER TO THE SPECIFIC GISSMO SLICE!!!!!! -->
            <param name="spectral_matrix" type="data" label="Input Dataset" data_ref="28747fb6b1b59dd4" help="Select an input spectral matrix from the 'MTBLS Spectral Matrices' data library." />
            <param name="config_yaml" type="upload" label="Upload YAML File" format="yaml" help="Upload a YAML file containing the required configuration." />

        </section>

    </inputs>
</tool>